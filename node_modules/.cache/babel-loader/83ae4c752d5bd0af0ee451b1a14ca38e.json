{"ast":null,"code":"import \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  name: 'app',\n  data: function data() {\n    return {\n      isGif: false,\n      workmode: false,\n      search_mode: '历史记录',\n      screenshotPopover: false,\n      pngurl: 'assets/start.png',\n      gifurl: 'assets/start.gif',\n      search_input: '',\n      savedTabsGroupList: {},\n      saveTabsGroupForm: {\n        groupName: ''\n      },\n      reloadTabsGroupForm: {\n        groupName: ''\n      },\n      selectVideo: false,\n      aid: '',\n      videosData: [],\n      cid: ''\n    };\n  },\n  methods: {\n    screenshot: function screenshot() {\n      chrome.tabs.captureVisibleTab(null, {\n        format: \"png\",\n        quality: 100\n      }, function (img_url) {\n        chrome.downloads.download({\n          url: img_url,\n          saveAs: true\n        }, function (res) {\n          console.log(res);\n        });\n      });\n    },\n    getSavedTabsGroupList: function getSavedTabsGroupList() {\n      var _this = this;\n\n      chrome.storage.local.get(\"savedTabsGroupList\", function (entry) {\n        _this.savedTabsGroupList = typeof entry.savedTabsGroupList == 'undefined' ? {} : entry.savedTabsGroupList;\n      });\n    },\n    saveTabsGroup: function saveTabsGroup() {\n      var _this2 = this;\n\n      chrome.tabs.query({\n        currentWindow: true\n      }, function (tabs) {\n        var urls = tabs.map(function (tab) {\n          return tab.url;\n        });\n        _this2.savedTabsGroupList[_this2.saveTabsGroupForm.groupName] = urls;\n        chrome.storage.local.set({\n          \"savedTabsGroupList\": _this2.savedTabsGroupList\n        });\n      });\n    },\n    reloadTabsGroup: function reloadTabsGroup() {\n      var _this3 = this;\n\n      chrome.storage.local.get(\"savedTabsGroupList\", function (entry) {\n        entry.savedTabsGroupList[_this3.reloadTabsGroupForm.groupName].forEach(function (URL) {\n          chrome.tabs.create({\n            url: URL\n          });\n        });\n      });\n    },\n    deleteTabsGroup: function deleteTabsGroup() {\n      var _this4 = this;\n\n      console.log(this.savedTabsGroupList);\n      chrome.storage.local.get(\"savedTabsGroupList\", function (entry) {\n        _this4.savedTabsGroupList = typeof entry.savedTabsGroupList == 'undefined' ? {} : entry.savedTabsGroupList;\n        delete entry.savedTabsGroupList[_this4.reloadTabsGroupForm.groupName];\n        console.log(_this4.savedTabsGroupList);\n        chrome.storage.local.set({\n          \"savedTabsGroupList\": _this4.savedTabsGroupList\n        });\n      });\n    },\n    getVideoList: function getVideoList() {\n      var _this5 = this;\n\n      chrome.tabs.query({\n        currentWindow: true,\n        active: true\n      }, function (tabs) {\n        var bv = tabs[0].url.match(/[\\s\\S]*(BV[a-z|A-Z|0-9]{10})[\\s\\S]*/)[1];\n        var aidModel = \"https://api.bilibili.com/x/web-interface/archive/stat?bvid=\";\n        var cidModel = \"https://api.bilibili.com/x/player/pagelist?bvid=\";\n        var requests = [];\n        var getAid = new Promise(function (resolve) {\n          axios({\n            method: \"GET\",\n            url: aidModel + bv\n          }).then(function (res) {\n            return resolve(res);\n          });\n        });\n        requests.push(getAid);\n        var getCid = new Promise(function (resolve) {\n          axios({\n            method: \"GET\",\n            url: cidModel + bv\n          }).then(function (res) {\n            return resolve(res);\n          });\n        });\n        requests.push(getCid);\n        Promise.all(requests).then(function (replist) {\n          _this5.aid = replist[0].data.data.aid;\n          _this5.videosData = replist[1].data.data;\n        });\n      });\n    },\n    downloadBiliVideo: function downloadBiliVideo(cid) {\n      var req = \"https://api.bilibili.com/x/player/playurl?avid=\" + this.aid + \"&cid=\" + cid + \"&qn=1&type=&otype=json&platform=html5&high_quality=1\";\n      axios({\n        method: \"GET\",\n        url: req\n      }).then(function (res) {\n        var videoURL = res.data.data.durl[0].url;\n        console.log(videoURL);\n        chrome.downloads.download({\n          url: videoURL,\n          saveAs: true,\n          method: \"GET\"\n        }, function (id) {\n          chrome.downloads.onChanged.addListener(function (delta) {\n            if (delta.id == id && delta.error != \"undefined\") {\n              console.log(delta);\n              chrome.downloads.resume(id);\n            }\n          });\n        });\n      });\n    },\n    reset: function reset() {\n      chrome.storage.local.clear(function () {\n        console.log(\"clear\");\n      });\n    },\n    showNotification: function showNotification(ntf) {\n      this.$notify({\n        // title: ntf,\n        dangerouslyUseHTMLString: true,\n        message: '<h3><img src=\"assets/xxy.png\" alt=\"xxy\" width=\"50px\" height=\"50px\">' + ntf + '</h3>',\n        // type: 'success',\n        duration: 800\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module"}