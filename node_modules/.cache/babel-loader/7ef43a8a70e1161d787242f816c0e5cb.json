{"ast":null,"code":"import \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  name: 'app',\n  data: function data() {\n    return {\n      isGif: false,\n      workmode: false,\n      search_mode: '历史记录',\n      screenshotPopover: false,\n      pngurl: 'assets/start.png',\n      gifurl: 'assets/start.gif',\n      search_input: '',\n      savedTabsGroupList: {},\n      saveTabsGroupForm: {\n        groupName: ''\n      },\n      reloadTabsGroupForm: {\n        groupName: ''\n      },\n      drawer: false,\n      testurl: \"https://cn-hbwh-fx-bcache-07.bilivideo.com/upgcxcode/93/46/496394693/496394693-1-208.mp4?e=ig8euxZM2rNcNbRH7bdVhwdlhWejhwdVhoNvNC8BqJIzNbfq9rVEuxTEnE8L5F6VnEsSTx0vkX8fqJeYTj_lta53NCM=&uipk=5&nbs=1&deadline=1649952886&gen=playurlv2&os=bcache&oi=1939639253&trid=00008d13e1dbb5004d588c99cb996dd2372bT&platform=html5&upsig=76a789f9b03595e4f7b55d17e28063d1&uparams=e,uipk,nbs,deadline,gen,os,oi,trid,platform&cdnid=3877&mid=23178869&bvc=vod&nettype=0&bw=196134&orderid=0,1&logo=80000000\"\n    };\n  },\n  methods: {\n    screenshot: function screenshot() {\n      chrome.tabs.captureVisibleTab(null, {\n        format: \"png\",\n        quality: 100\n      }, function (img_url) {\n        chrome.downloads.download({\n          url: img_url,\n          saveAs: true\n        }, function (res) {\n          console.log(res);\n        });\n      });\n    },\n    getTabs: function getTabs() {\n      chrome.tabs.query({}, function (tabs) {\n        var urls = tabs.map(function (tab) {\n          return tab.url;\n        });\n        chrome.storage.local.set({\n          \"test\": urls\n        });\n      });\n    },\n    getSavedTabsGroupList: function getSavedTabsGroupList() {\n      var _this = this;\n\n      chrome.storage.local.get(\"savedTabsGroupList\", function (entry) {\n        _this.savedTabsGroupList = typeof entry.savedTabsGroupList == 'undefined' ? {} : entry.savedTabsGroupList;\n      });\n    },\n    saveTabsGroup: function saveTabsGroup() {\n      var _this2 = this;\n\n      chrome.tabs.query({\n        currentWindow: true\n      }, function (tabs) {\n        var urls = tabs.map(function (tab) {\n          return tab.url;\n        });\n        _this2.savedTabsGroupList[_this2.saveTabsGroupForm.groupName] = urls;\n        chrome.storage.local.set({\n          \"savedTabsGroupList\": _this2.savedTabsGroupList\n        });\n      });\n    },\n    reloadTabsGroup: function reloadTabsGroup() {\n      var _this3 = this;\n\n      chrome.storage.local.get(\"savedTabsGroupList\", function (entry) {\n        entry.savedTabsGroupList[_this3.reloadTabsGroupForm.groupName].forEach(function (URL) {\n          chrome.tabs.create({\n            url: URL\n          });\n        });\n      });\n    },\n    reset: function reset() {\n      chrome.storage.local.clear(function () {\n        console.log(\"clear\");\n      });\n    },\n    deleteTabsGroup: function deleteTabsGroup() {\n      var _this4 = this;\n\n      console.log(this.savedTabsGroupList);\n      chrome.storage.local.get(\"savedTabsGroupList\", function (entry) {\n        _this4.savedTabsGroupList = typeof entry.savedTabsGroupList == 'undefined' ? {} : entry.savedTabsGroupList;\n        delete entry.savedTabsGroupList[_this4.reloadTabsGroupForm.groupName];\n        console.log(_this4.savedTabsGroupList);\n        chrome.storage.local.set({\n          \"savedTabsGroupList\": _this4.savedTabsGroupList\n        });\n      });\n    },\n    testdownload: function testdownload() {\n      console.log(\"testdownload\");\n      console.log(this.testurl);\n      chrome.downloads.download({\n        url: this.testurl,\n        saveAs: true\n      });\n    },\n    downloadBiliVideo: function downloadBiliVideo() {\n      chrome.tabs.query({\n        currentWindow: true,\n        active: true\n      }, function (tabs) {\n        var bv = tabs[0].url.match(/[\\s\\S]*(BV[a-z|A-Z|0-9]{10})[\\s\\S]*/)[1];\n        var aidModel = \"https://api.bilibili.com/x/web-interface/archive/stat?bvid=\";\n        var cidModel = \"https://api.bilibili.com/x/player/pagelist?bvid=\";\n        var requests = [];\n        var getAid = new Promise(function (resolve) {\n          axios({\n            method: \"GET\",\n            url: aidModel + bv\n          }).then(function (res) {\n            return resolve(res);\n          });\n        });\n        requests.push(getAid);\n        var getCid = new Promise(function (resolve) {\n          axios({\n            method: \"GET\",\n            url: cidModel + bv\n          }).then(function (res) {\n            return resolve(res);\n          });\n        });\n        requests.push(getCid);\n        Promise.all(requests).then(function (replist) {\n          var aid = replist[0].data.data.aid;\n          var cid = replist[1].data.data[0].cid;\n          var req = \"https://api.bilibili.com/x/player/playurl?avid=\" + aid + \"&cid=\" + cid + \"&qn=1&type=&otype=json&platform=html5&high_quality=1\";\n          axios({\n            method: \"GET\",\n            url: req\n          }).then(function (res) {\n            var videoURL = res.data.data.durl[0].url;\n            console.log(videoURL);\n            chrome.downloads.download({\n              url: videoURL,\n              saveAs: true\n            });\n          });\n        });\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module"}